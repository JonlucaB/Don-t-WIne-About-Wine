{"ast":null,"code":"var mathUtils = require('../math/mathUtils');\n\nvar has = require('../internals/has'),\n    is = require('../internals/is');\n\nvar hasXY = has.XY;\nvar isRect = is.Rect; //modules defined within\n\nvar Vec2D, Vec3D;\n/**\n@class a two-dimensional vector class\n*/\n\nVec2D = function (a, b) {\n  if (hasXY(a)) {\n    b = a.y;\n    a = a.x;\n  } else {\n    a = a || 0;\n    b = b || 0;\n  }\n\n  this.x = a;\n  this.y = b;\n};\n\nVec2D.Axis = {\n  X: {\n    getVector: function () {\n      return Vec2D.X_AXIS;\n    },\n    toString: function () {\n      return \"Vec2D.Axis.X\";\n    }\n  },\n  Y: {\n    getVector: function () {\n      return Vec2D.Y_AXIS;\n    },\n    toString: function () {\n      return \"Vec2D.Axis.Y\";\n    }\n  }\n}; //private,\n\nvar _getXY = function () {\n  //create a temp object to avoid creating garbage-collectable objects\n  var temp = {\n    x: 0,\n    y: 0\n  };\n  return function getXY(a, b) {\n    if (a && typeof a.x === 'number' && typeof a.y === 'number') {\n      return a;\n    } else {\n      if (a !== undefined && b === undefined) {\n        b = a;\n      } else if (a === undefined) {\n        a = 0;\n      } else if (b === undefined) {\n        b = 0;\n      }\n    }\n\n    temp.x = a;\n    temp.y = b;\n    return temp;\n  };\n}(); //public\n\n\nVec2D.prototype = {\n  abs: function () {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    return this;\n  },\n  add: function (a, b) {\n    var v = new Vec2D(a, b);\n    v.x += this.x;\n    v.y += this.y;\n    return v;\n  },\n\n  /**\n   * Adds vector {a,b,c} and overrides coordinates with result.\n   *\n   * @param a\n   *\t\t\t\tX coordinate\n   * @param b\n   *\t\t\t\tY coordinate\n   * @return itself\n   */\n  addSelf: function (a, b) {\n    var v = _getXY(a, b);\n\n    this.x += v.x;\n    this.y += v.y;\n    return this;\n  },\n  angleBetween: function (v, faceNormalize) {\n    if (faceNormalize === undefined) {\n      return Math.acos(this.dot(v));\n    }\n\n    var theta = faceNormalize ? this.getNormalized().dot(v.getNormalized()) : this.dot(v);\n    return Math.acos(mathUtils.clipNormalized(theta));\n  },\n  //bisect() is in Vec2D_post.js\n\n  /**\n   * Sets all vector components to 0.\n   *\n   * @return itself\n   */\n  clear: function () {\n    this.x = this.y = 0;\n    return this;\n  },\n  compareTo: function (vec) {\n    if (this.x == vec.x && this.y == vec.y) {\n      return 0;\n    }\n\n    return this.magSquared() - vec.magSquared();\n  },\n\n  /**\n   * Forcefully fits the vector in the given rectangle.\n   *\n   * @param a\n   *\t\teither a Rectangle by itself or the Vec2D min\n   * @param b\n   *\t\tVec2D max\n   * @return itself\n   */\n  constrain: function (a, b) {\n    if (hasXY(a) && hasXY(b)) {\n      this.x = mathUtils.clip(this.x, a.x, b.x);\n      this.y = mathUtils.clip(this.y, a.y, b.y);\n    } else if (isRect(a)) {\n      this.x = mathUtils.clip(this.x, a.x, a.x + a.width);\n      this.y = mathUtils.clip(this.y, a.y, a.y + a.height);\n    }\n\n    return this;\n  },\n  copy: function () {\n    return new Vec2D(this);\n  },\n  cross: function (v) {\n    return this.x * v.y - this.y * v.x;\n  },\n  distanceTo: function (v) {\n    if (v !== undefined) {\n      var dx = this.x - v.x;\n      var dy = this.y - v.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    } else {\n      return NaN;\n    }\n  },\n  distanceToSquared: function (v) {\n    if (v !== undefined) {\n      var dx = this.x - v.x;\n      var dy = this.y - v.y;\n      return dx * dx + dy * dy;\n    } else {\n      return NaN;\n    }\n  },\n  dot: function (v) {\n    return this.x * v.x + this.y * v.y;\n  },\n  equals: function (obj) {\n    if (!hasXY(obj)) {\n      return false;\n    }\n\n    return this.x == obj.x && this.y == obj.y;\n  },\n  equalsWithTolerance: function (v, tolerance) {\n    if (!hasXY(v)) {\n      return false;\n    }\n\n    if (mathUtils.abs(this.x - v.x) < tolerance) {\n      if (mathUtils.abs(this.y - v.y) < tolerance) {\n        return true;\n      }\n    }\n\n    return false;\n  },\n  floor: function () {\n    this.x = mathUtils.floor(this.x);\n    this.y = mathUtils.floor(this.y);\n    return this;\n  },\n\n  /**\n   * Replaces the vector components with the fractional part of their current\n   * values\n   *\n   * @return itself\n   */\n  frac: function () {\n    this.x -= mathUtils.floor(this.x);\n    this.y -= mathUtils.floor(this.y);\n    return this;\n  },\n  getAbs: function () {\n    return new Vec2D(this).abs();\n  },\n  getComponent: function (id) {\n    if (typeof id == 'number') {\n      id = id === 0 ? Vec2D.Axis.X : Vec2D.Axis.Y;\n    }\n\n    if (id == Vec2D.Axis.X) {\n      return this.x;\n    } else if (id == Vec2D.Axis.Y) {\n      return this.y;\n    }\n\n    return 0;\n  },\n  getConstrained: function (r) {\n    return new Vec2D(this).constrain(r);\n  },\n  getFloored: function () {\n    return new Vec2D(this).floor();\n  },\n  getFrac: function () {\n    return new Vec2D(this).frac();\n  },\n  getInverted: function () {\n    return new Vec2D(-this.x, -this.y);\n  },\n  getLimited: function (lim) {\n    if (this.magSquared() > lim * lim) {\n      return this.getNormalizedTo(lim);\n    }\n\n    return new Vec2D(this);\n  },\n  getNormalized: function () {\n    return new Vec2D(this).normalize();\n  },\n  getNormalizedTo: function (len) {\n    return new Vec2D(this).normalizeTo(len);\n  },\n  getPerpendicular: function () {\n    return new Vec2D(this).perpendicular();\n  },\n  getReciprocal: function () {\n    return new Vec2D(this).reciprocal();\n  },\n  getReflected: function (normal) {\n    return new Vec2D(this).reflect(normal);\n  },\n  getRotated: function (theta) {\n    return new Vec2D(this).rotate(theta);\n  },\n  getSignum: function () {\n    return new Vec2D(this).signum();\n  },\n  heading: function () {\n    return Math.atan2(this.y, this.x);\n  },\n  interpolateTo: function (v, f, s) {\n    if (s === undefined) {\n      return new Vec2D(this.x + (v.x - this.x) * f, this.y + (v.y - this.y) * f);\n    } else {\n      return new Vec2D(s.interpolate(this.x, v.x, f), s.interpolate(this.y, v.y, f));\n    }\n  },\n\n  /**\n   * Interpolates the vector towards the given target vector, using linear\n   * interpolation\n   *\n   * @param v\n   *\t\t\t\ttarget vector\n   * @param f\n   *\t\t\t\tinterpolation factor (should be in the range 0..1)\n   * @return itself, result overrides current vector\n   */\n  interpolateToSelf: function (v, f, s) {\n    if (s === undefined) {\n      this.x += (v.x - this.x) * f;\n      this.y += (v.y - this.y) * f;\n    } else {\n      this.x = s.interpolate(this.x, v.x, f);\n      this.y = s.interpolate(this.y, v.y, f);\n    }\n\n    return this;\n  },\n  invert: function () {\n    this.x *= -1;\n    this.y *= -1;\n    return this;\n  },\n  isInCircle: function (sO, sR) {\n    var d = this.sub(sO).magSquared();\n    return d <= sR * sR;\n  },\n  isInRectangle: function (rect) {\n    if (this.x < rect.x || this.x > rect.x + rect.width) {\n      return false;\n    }\n\n    if (this.y < rect.y || this.y > rect.y + rect.height) {\n      return false;\n    }\n\n    return true;\n  },\n  isInTriangle: function (a, b, c) {\n    var v1 = this.sub(a).normalize();\n    var v2 = this.sub(b).normalize();\n    var v3 = this.sub(c).normalize();\n    var total_angles = Math.acos(v1.dot(v2));\n    total_angles += Math.acos(v2.dot(v3));\n    total_angles += Math.acos(v3.dot(v1));\n    return Math.abs(total_angles - mathUtils.TWO_PI) <= 0.005;\n  },\n  isMajorAxis: function (tol) {\n    var ax = Math.abs(this.x);\n    var ay = Math.abs(this.y);\n    var itol = 1 - tol;\n\n    if (ax > itol) {\n      return ay < tol;\n    } else if (ay > itol) {\n      return ax < tol;\n    }\n\n    return false;\n  },\n  isZeroVector: function () {\n    return Math.abs(this.x) < mathUtils.EPS && Math.abs(this.y) < mathUtils.EPS;\n  },\n\n  /**\n   * Adds random jitter to the vector in the range -j ... +j using the default\n   * {@link Random} generator of {@link MathUtils}.\n   *\n   * @param a\n   *\t\t\t\tmaximum x jitter or  Vec2D\n   * @param b\n   *\t\t\t\tmaximum y jitter or undefined\n   * @return itself\n   */\n  jitter: function (a, b) {\n    var v = _getXY(a, b);\n\n    this.x += mathUtils.normalizedRandom() * v.x;\n    this.y += mathUtils.normalizedRandom() * v.y;\n    return this;\n  },\n  limit: function (lim) {\n    if (this.magSquared() > lim * lim) {\n      return this.normalize().scaleSelf(lim);\n    }\n\n    return this;\n  },\n  magnitude: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  },\n  magSquared: function () {\n    return this.x * this.x + this.y * this.y;\n  },\n  max: function (v) {\n    return new Vec2D(mathUtils.max(this.x, v.x), mathUtils.max(this.y, v.y));\n  },\n  maxSelf: function (v) {\n    this.x = mathUtils.max(this.x, v.x);\n    this.y = mathUtils.max(this.y, v.y);\n    return this;\n  },\n  min: function (v) {\n    return new Vec2D(mathUtils.min(this.x, v.x), mathUtils.min(this.y, v.y));\n  },\n  minSelf: function (v) {\n    this.x = mathUtils.min(this.x, v.x);\n    this.y = mathUtils.min(this.y, v.y);\n    return this;\n  },\n\n  /**\n   * Normalizes the vector so that its magnitude = 1\n   *\n   * @return itself\n   */\n  normalize: function () {\n    var mag = this.x * this.x + this.y * this.y;\n\n    if (mag > 0) {\n      mag = 1.0 / Math.sqrt(mag);\n      this.x *= mag;\n      this.y *= mag;\n    }\n\n    return this;\n  },\n\n  /**\n   * Normalizes the vector to the given length.\n   *\n   * @param len\n   *\t\t\t\tdesired length\n   * @return itself\n   */\n  normalizeTo: function (len) {\n    var mag = Math.sqrt(this.x * this.x + this.y * this.y);\n\n    if (mag > 0) {\n      mag = len / mag;\n      this.x *= mag;\n      this.y *= mag;\n    }\n\n    return this;\n  },\n  perpendicular: function () {\n    var t = this.x;\n    this.x = -this.y;\n    this.y = t;\n    return this;\n  },\n  positiveHeading: function () {\n    var dist = Math.sqrt(this.x * this.x + this.y * this.y);\n\n    if (this.y >= 0) {\n      return Math.acos(this.x / dist);\n    }\n\n    return Math.acos(-this.x / dist) + mathUtils.PI;\n  },\n  reciprocal: function () {\n    this.x = 1.0 / this.x;\n    this.y = 1.0 / this.y;\n    return this;\n  },\n  reflect: function (normal) {\n    return this.set(normal.scale(this.dot(normal) * 2).subSelf(this));\n  },\n\n  /**\n   * Rotates the vector by the given angle around the Z axis.\n   *\n   * @param theta\n   * @return itself\n   */\n  rotate: function (theta) {\n    var co = Math.cos(theta);\n    var si = Math.sin(theta);\n    var xx = co * this.x - si * this.y;\n    this.y = si * this.x + co * this.y;\n    this.x = xx;\n    return this;\n  },\n  roundToAxis: function () {\n    if (Math.abs(this.x) < 0.5) {\n      this.x = 0;\n    } else {\n      this.x = this.x < 0 ? -1 : 1;\n      this.y = 0;\n    }\n\n    if (Math.abs(this.y) < 0.5) {\n      this.y = 0;\n    } else {\n      this.y = this.y < 0 ? -1 : 1;\n      this.x = 0;\n    }\n\n    return this;\n  },\n  scale: function (a, b) {\n    var v = _getXY(a, b);\n\n    return new Vec2D(this.x * v.x, this.y * v.y);\n  },\n  scaleSelf: function (a, b) {\n    var v = _getXY(a, b);\n\n    this.x *= v.x;\n    this.y *= v.y;\n    return this;\n  },\n  set: function (a, b) {\n    var v = _getXY(a, b);\n\n    this.x = v.x;\n    this.y = v.y;\n    return this;\n  },\n  setComponent: function (id, val) {\n    if (typeof id == 'number') {\n      id = id === 0 ? Vec2D.Axis.X : Vec2D.Axis.Y;\n    }\n\n    if (id === Vec2D.Axis.X) {\n      this.x = val;\n    } else if (id === Vec2D.Axis.Y) {\n      this.y = val;\n    }\n\n    return this;\n  },\n\n  /**\n   * Replaces all vector components with the signum of their original values.\n   * In other words if a components value was negative its new value will be\n   * -1, if zero => 0, if positive => +1\n   *\n   * @return itself\n   */\n  signum: function () {\n    this.x = this.x < 0 ? -1 : this.x === 0 ? 0 : 1;\n    this.y = this.y < 0 ? -1 : this.y === 0 ? 0 : 1;\n    return this;\n  },\n  sub: function (a, b) {\n    var v = _getXY(a, b);\n\n    return new Vec2D(this.x - v.x, this.y - v.y);\n  },\n\n  /**\n   * Subtracts vector {a,b,c} and overrides coordinates with result.\n   *\n   * @param a\n   *\t\t\t\tX coordinate\n   * @param b\n   *\t\t\t\tY coordinate\n   * @return itself\n   */\n  subSelf: function (a, b) {\n    var v = _getXY(a, b);\n\n    this.x -= v.x;\n    this.y -= v.y;\n    return this;\n  },\n  tangentNormalOfEllipse: function (eO, eR) {\n    var p = this.sub(eO);\n    var xr2 = eR.x * eR.x;\n    var yr2 = eR.y * eR.y;\n    return new Vec2D(p.x / xr2, p.y / yr2).normalize();\n  },\n  //to3D** methods are in Vec2D_post.js\n  toArray: function () {\n    return [this.x, this.y];\n  },\n  toCartesian: function () {\n    var xx = this.x * Math.cos(this.y);\n    this.y = this.x * Math.sin(this.y);\n    this.x = xx;\n    return this;\n  },\n  toPolar: function () {\n    var r = Math.sqrt(this.x * this.x + this.y * this.y);\n    this.y = Math.atan2(this.y, this.x);\n    this.x = r;\n    return this;\n  },\n  toString: function () {\n    var s = \"{x:\" + this.x + \", y:\" + this.y + \"}\";\n    return s;\n  }\n}; //these requires are in the functions because of a circular dependency\n\nVec2D.prototype.bisect = function (b) {\n  var diff = this.sub(b);\n  var sum = this.add(b);\n  var dot = diff.dot(sum);\n  return new Vec3D(diff.x, diff.y, -dot / 2);\n};\n\nVec2D.prototype.to3DXY = function () {\n  return new Vec3D(this.x, this.y, 0);\n};\n\nVec2D.prototype.to3DXZ = function () {\n  return new Vec3D(this.x, 0, this.y);\n};\n\nVec2D.prototype.to3DYZ = function () {\n  return new Vec3D(0, this.x, this.y);\n};\n\nVec2D.X_AXIS = new Vec2D(1, 0);\nVec2D.Y_AXIS = new Vec2D(0, 1);\nVec2D.ZERO = new Vec2D();\nVec2D.MIN_VALUE = new Vec2D(Number.MIN_VALUE, Number.MIN_VALUE);\nVec2D.MAX_VALUE = new Vec2D(Number.MAX_VALUE, Number.MAX_VALUE);\n\nVec2D.fromTheta = function (theta) {\n  return new Vec2D(Math.cos(theta), Math.sin(theta));\n};\n\nVec2D.max = function (a, b) {\n  return new Vec2D(mathUtils.max(a.x, b.x), mathUtils.max(a.y, b.y));\n};\n\nVec2D.min = function (a, b) {\n  return new Vec2D(mathUtils.min(a.x, b.x), mathUtils.min(a.y, b.y));\n};\n\nVec2D.randomVector = function (rnd) {\n  var v = new Vec2D(Math.random() * 2 - 1, Math.random() * 2 - 1);\n  return v.normalize();\n};\n/**\n * @member toxi\n * @class Creates a new vector with the given coordinates. Coordinates will default to zero\n * @param {Number} x the x\n * @param {Number} y the y\n * @param {Number} z the z\n */\n\n\nVec3D = function (x, y, z) {\n  if (has.XYZ(x)) {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z;\n  } else if (x === undefined) {\n    //if none or all were passed\n    this.x = 0.0;\n    this.y = 0.0;\n    this.z = 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n  }\n};\n\nVec3D.prototype = {\n  abs: function () {\n    this.x = Math.abs(this.x);\n    this.y = Math.abs(this.y);\n    this.z = Math.abs(this.z);\n    return this;\n  },\n  add: function (a, b, c) {\n    if (has.XYZ(a)) {\n      return new Vec3D(this.x + a.x, this.y + a.y, this.z + a.z);\n    }\n\n    return new Vec3D(this.x + a, this.y + b, this.z + c);\n  },\n\n  /**\n   * Adds vector {a,b,c} and overrides coordinates with result.\n   *\n   * @param a\n   *\t\t\t\tX coordinate\n   * @param b\n   *\t\t\t\tY coordinate\n   * @param c\n   *\t\t\t\tZ coordinate\n   * @return itself\n   */\n  addSelf: function (a, b, c) {\n    if (a !== undefined && b !== undefined && c !== undefined) {\n      this.x += a;\n      this.y += b;\n      this.z += c;\n    } else {\n      this.x += a.x;\n      this.y += a.y;\n      this.z += a.z;\n    }\n\n    return this;\n  },\n  angleBetween: function (vec, faceNormalizeBool) {\n    var theta;\n\n    if (faceNormalizeBool) {\n      theta = this.getNormalized().dot(vec.getNormalized());\n    } else {\n      theta = this.dot(vec);\n    }\n\n    return Math.acos(theta);\n  },\n  clear: function () {\n    this.x = this.y = this.z = 0;\n    return this;\n  },\n  compareTo: function (vec) {\n    if (this.x == vec.x && this.y == vec.y && this.z == vec.z) {\n      return 0;\n    }\n\n    return this.magSquared() - vec.magSqaured();\n  },\n\n  /**\n   * Forcefully fits the vector in the given AABB specified by the 2 given\n   * points.\n   *\n   * @param box_or_min\n   *\t\teither the AABB box by itself, or your min Vec3D with accompanying max\n   * @param max\n   * @return itself\n   */\n  constrain: function (box_or_min, max) {\n    var min;\n\n    if (is.AABB(box_or_min)) {\n      max = box_or_min.getMax();\n      min = box_or_min.getMin();\n    } else {\n      min = box_or_min;\n    }\n\n    this.x = mathUtils.clip(this.x, min.x, max.x);\n    this.y = mathUtils.clip(this.y, min.y, max.y);\n    this.z = mathUtils.clip(this.z, min.z, max.z);\n    return this;\n  },\n  copy: function () {\n    return new Vec3D(this);\n  },\n  cross: function (vec) {\n    return new Vec3D(this.y * vec.z - vec.y * this.z, this.z * vec.x - vec.z * this.x, this.x * vec.y - vec.x * this.y);\n  },\n  crossInto: function (vec, result) {\n    var vx = vec.x;\n    var vy = vec.y;\n    var vz = vec.z;\n    result.x = this.y * vz - vy * this.z;\n    result.y = this.z * vx - vz * this.x;\n    result.z = this.x * vy - vx * this.y;\n    return result;\n  },\n\n  /**\n   * Calculates cross-product with vector v. The resulting vector is\n   * perpendicular to both the current and supplied vector and overrides the\n   * current.\n   *\n   * @param v\n   *\t\t\t\tthe v\n   *\n   * @return itself\n   */\n  crossSelf: function (vec) {\n    var cx = this.y * vec.z - vec.y * this.z;\n    var cy = this.z * vec.x - vec.z * this.x;\n    this.z = this.x * vec.y - vec.x * this.y;\n    this.y = cy;\n    this.x = cx;\n    return this;\n  },\n  distanceTo: function (vec) {\n    if (vec !== undefined) {\n      var dx = this.x - vec.x;\n      var dy = this.y - vec.y;\n      var dz = this.z - vec.z;\n      return Math.sqrt(dx * dx + dy * dy + dz * dz);\n    }\n\n    return NaN;\n  },\n  distanceToSquared: function (vec) {\n    if (vec !== undefined) {\n      var dx = this.x - vec.x;\n      var dy = this.y - vec.y;\n      var dz = this.z - vec.z;\n      return dx * dx + dy * dy + dz * dz;\n    }\n\n    return NaN;\n  },\n  dot: function (vec) {\n    return this.x * vec.x + this.y * vec.y + this.z * vec.z;\n  },\n  equals: function (vec) {\n    if (has.XYZ(vec)) {\n      return this.x == vec.x && this.y == vec.y && this.z == vec.z;\n    }\n\n    return false;\n  },\n  equalsWithTolerance: function (vec, tolerance) {\n    if (Math.abs(this.x - vec.x) < tolerance) {\n      if (Math.abs(this.y - vec.y) < tolerance) {\n        if (Math.abs(this.z - vec.z) < tolerance) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  },\n  floor: function () {\n    this.x = Math.floor(this.x);\n    this.y = Math.floor(this.y);\n    this.z = Math.floor(this.z);\n    return this;\n  },\n\n  /**\n   * Replaces the vector components with the fractional part of their current\n   * values.\n   *\n   * @return itself\n   */\n  frac: function () {\n    this.x -= Math.floor(this.x);\n    this.y -= Math.floor(this.y);\n    this.z -= Math.floor(this.z);\n    return this;\n  },\n  getAbs: function () {\n    return new Vec3D(this).abs();\n  },\n  getComponent: function (id) {\n    if (typeof id == 'number') {\n      if (id === Vec3D.Axis.X) {\n        id = 0;\n      } else if (id === Vec3D.Axis.Y) {\n        id = 1;\n      } else {\n        id = 2;\n      }\n    }\n\n    switch (id) {\n      case 0:\n        return this.x;\n\n      case 1:\n        return this.y;\n\n      case 2:\n        return this.z;\n    }\n  },\n  getConstrained: function (box) {\n    return new Vec3D(this).constrain(box);\n  },\n  getFloored: function () {\n    return new Vec3D(this).floor();\n  },\n  getFrac: function () {\n    return new Vec3D(this).frac();\n  },\n  getInverted: function () {\n    return new Vec3D(-this.x, -this.y, -this.z);\n  },\n  getLimited: function (limit) {\n    if (this.magSquared() > limit * limit) {\n      return this.getNormalizedTo(limit);\n    }\n\n    return new Vec3D(this);\n  },\n  getNormalized: function () {\n    return new Vec3D(this).normalize();\n  },\n  getNormalizedTo: function (length) {\n    return new Vec3D(this).normalizeTo(length);\n  },\n  getReciprocal: function () {\n    return this.copy().reciprocal();\n  },\n  getReflected: function (normal) {\n    return this.copy().reflect(normal);\n  },\n  getRotatedAroundAxis: function (vec_axis, theta) {\n    return new Vec3D(this).rotateAroundAxis(vec_axis, theta);\n  },\n  getRotatedX: function (theta) {\n    return new Vec3D(this).rotateX(theta);\n  },\n  getRotatedY: function (theta) {\n    return new Vec3D(this).rotateY(theta);\n  },\n  getRotatedZ: function (theta) {\n    return new Vec3D(this).rotateZ(theta);\n  },\n  getSignum: function () {\n    return new Vec3D(this).signum();\n  },\n  headingXY: function () {\n    return Math.atan2(this.y, this.x);\n  },\n  headingXZ: function () {\n    return Math.atan2(this.z, this.x);\n  },\n  headingYZ: function () {\n    return Math.atan2(this.y, this.z);\n  },\n  immutable: function () {\n    return this; //cant make read-only in javascript, implementing to avoid error\n  },\n  interpolateTo: function (v, f, s) {\n    if (s === undefined) {\n      return new Vec3D(this.x + (v.x - this.x) * f, this.y + (v.y - this.y) * f, this.z + (v.z - this.z) * f);\n    }\n\n    return new Vec3D(s.interpolate(this.y, v.y, f), s.interpolate(this.y, v.y, f), s.interpolate(this.z, v.z, f));\n  },\n  interpolateToSelf: function (v, f, s) {\n    if (s === undefined) {\n      this.x += (v.x - this.x) * f;\n      this.y += (v.y - this.y) * f;\n      this.z += (v.z - this.z) * f;\n    } else {\n      this.x = s.interpolate(this.x, v.x, f);\n      this.y = s.interpolate(this.y, v.y, f);\n      this.z = s.interpolate(this.z, v.z, f);\n    }\n\n    return this;\n  },\n  invert: function () {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    return this;\n  },\n  isInAABB: function (box_or_origin, boxExtent) {\n    if (boxExtent) {\n      var w = boxExtent.x;\n\n      if (this.x < box_or_origin.x - w || this.x > box_or_origin.x + w) {\n        return false;\n      }\n\n      w = boxExtent.y;\n\n      if (this.y < box_or_origin.y - w || this.y > box_or_origin.y + w) {\n        return false;\n      }\n\n      w = boxExtent.y;\n\n      if (this.z < box_or_origin.z - w || this.y > box_or_origin.z + w) {\n        return false;\n      }\n    } else {\n      var min = box_or_origin.getMin(),\n          max = box_or_origin.getMax();\n\n      if (this.x < min.x || this.x > max.x) {\n        return false;\n      }\n\n      if (this.y < min.y || this.y > max.y) {\n        return false;\n      }\n\n      if (this.z < min.z || this.z > max.z) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n  isMajorAxis: function (tol) {\n    var ax = mathUtils.abs(this.x);\n    var ay = mathUtils.abs(this.y);\n    var az = mathUtils.abs(this.z);\n    var itol = 1 - tol;\n\n    if (ax > itol) {\n      if (ay < tol) {\n        return az < tol;\n      }\n    } else if (ay > itol) {\n      if (ax < tol) {\n        return az < tol;\n      }\n    } else if (az > itol) {\n      if (ax < tol) {\n        return ay < tol;\n      }\n    }\n\n    return false;\n  },\n  isZeroVector: function () {\n    return Math.abs(this.x) < mathUtils.EPS && Math.abs(this.y) < mathUtils.EPS && mathUtils.abs(this.z) < mathUtils.EPS;\n  },\n\n  /**\n   * Add random jitter to the vector in the range -j ... +j using the default\n   * {@link Random} generator of {@link MathUtils}.\n   *\n   * @param j\n   *\t\t\t\tthe j\n   *\n   * @return the vec3 d\n   */\n  jitter: function (a, b, c) {\n    if (b === undefined || c === undefined) {\n      b = c = a;\n    }\n\n    this.x += mathUtils.normalizedRandom() * a;\n    this.y += mathUtils.normalizedRandom() * b;\n    this.z += mathUtils.normalizedRandom() * c;\n    return this;\n  },\n  limit: function (lim) {\n    if (this.magSquared() > lim * lim) {\n      return this.normalize().scaleSelf(lim);\n    }\n\n    return this;\n  },\n  magnitude: function () {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  magSquared: function () {\n    return this.x * this.x + this.y * this.y + this.z * this.z;\n  },\n  maxSelf: function (vec) {\n    this.x = Math.max(this.x, vec.x);\n    this.y = Math.max(this.y, vec.y);\n    this.z = Math.max(this.z, vec.z);\n    return this;\n  },\n  minSelf: function (vec) {\n    this.x = Math.min(this.x, vec.x);\n    this.y = Math.min(this.y, vec.y);\n    this.z = Math.min(this.z, vec.z);\n    return this;\n  },\n  modSelf: function (basex, basey, basez) {\n    if (basey === undefined || basez === undefined) {\n      basey = basez = basex;\n    }\n\n    this.x %= basex;\n    this.y %= basey;\n    this.z %= basez;\n    return this;\n  },\n  normalize: function () {\n    var mag = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\n    if (mag > 0) {\n      mag = 1.0 / mag;\n      this.x *= mag;\n      this.y *= mag;\n      this.z *= mag;\n    }\n\n    return this;\n  },\n  normalizeTo: function (length) {\n    var mag = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\n    if (mag > 0) {\n      mag = length / mag;\n      this.x *= mag;\n      this.y *= mag;\n      this.z *= mag;\n    }\n\n    return this;\n  },\n  reciprocal: function () {\n    this.x = 1.0 / this.x;\n    this.y = 1.0 / this.y;\n    this.z = 1.0 / this.z;\n    return this;\n  },\n  reflect: function (normal) {\n    return this.set(normal.scale(this.dot(normal) * 2).subSelf(this));\n  },\n\n  /**\n   * Rotates the vector around the giving axis.\n   *\n   * @param axis\n   *\t\t\t\trotation axis vector\n   * @param theta\n   *\t\t\t\trotation angle (in radians)\n   *\n   * @return itself\n   */\n  rotateAroundAxis: function (vec_axis, theta) {\n    var ax = vec_axis.x,\n        ay = vec_axis.y,\n        az = vec_axis.z,\n        ux = ax * this.x,\n        uy = ax * this.y,\n        uz = ax * this.z,\n        vx = ay * this.x,\n        vy = ay * this.y,\n        vz = ay * this.z,\n        wx = az * this.x,\n        wy = az * this.y,\n        wz = az * this.z,\n        si = Math.sin(theta),\n        co = Math.cos(theta);\n    var xx = ax * (ux + vy + wz) + (this.x * (ay * ay + az * az) - ax * (vy + wz)) * co + (-wy + vz) * si;\n    var yy = ay * (ux + vy + wz) + (this.y * (ax * ax + az * az) - ay * (ux + wz)) * co + (wx - uz) * si;\n    var zz = az * (ux + vy + wz) + (this.z * (ax * ax + ay * ay) - az * (ux + vy)) * co + (-vx + uy) * si;\n    this.x = xx;\n    this.y = yy;\n    this.z = zz;\n    return this;\n  },\n\n  /**\n   * Rotates the vector by the given angle around the X axis.\n   *\n   * @param theta\n   *\t\t\t\tthe theta\n   *\n   * @return itself\n   */\n  rotateX: function (theta) {\n    var co = Math.cos(theta);\n    var si = Math.sin(theta);\n    var zz = co * this.z - si * this.y;\n    this.y = si * this.z + co * this.y;\n    this.z = zz;\n    return this;\n  },\n\n  /**\n   * Rotates the vector by the given angle around the Y axis.\n   *\n   * @param theta\n   *\t\t\t\tthe theta\n   *\n   * @return itself\n   */\n  rotateY: function (theta) {\n    var co = Math.cos(theta);\n    var si = Math.sin(theta);\n    var xx = co * this.x - si * this.z;\n    this.z = si * this.x + co * this.z;\n    this.x = xx;\n    return this;\n  },\n\n  /**\n   * Rotates the vector by the given angle around the Z axis.\n   *\n   * @param theta\n   *\t\t\t\tthe theta\n   *\n   * @return itself\n   */\n  rotateZ: function (theta) {\n    var co = Math.cos(theta);\n    var si = Math.sin(theta);\n    var xx = co * this.x - si * this.y;\n    this.y = si * this.x + co * this.y;\n    this.x = xx;\n    return this;\n  },\n\n  /**\n   * Rounds the vector to the closest major axis. Assumes the vector is\n   * normalized.\n   *\n   * @return itself\n   */\n  roundToAxis: function () {\n    if (Math.abs(this.x) < 0.5) {\n      this.x = 0;\n    } else {\n      this.x = this.x < 0 ? -1 : 1;\n      this.y = this.z = 0;\n    }\n\n    if (Math.abs(this.y) < 0.5) {\n      this.y = 0;\n    } else {\n      this.y = this.y < 0 ? -1 : 1;\n      this.x = this.z = 0;\n    }\n\n    if (Math.abs(this.z) < 0.5) {\n      this.z = 0;\n    } else {\n      this.z = this.z < 0 ? -1 : 1;\n      this.x = this.y = 0;\n    }\n\n    return this;\n  },\n  scale: function (a, b, c) {\n    if (has.XYZ(a)) {\n      //if it was a vec3d that was passed\n      return new Vec3D(this.x * a.x, this.y * a.y, this.z * a.z);\n    } else if (b === undefined || c === undefined) {\n      //if only one float was passed\n      b = c = a;\n    }\n\n    return new Vec3D(this.x * a, this.y * b, this.z * c);\n  },\n  scaleSelf: function (a, b, c) {\n    if (has.XYZ(a)) {\n      this.x *= a.x;\n      this.y *= a.y;\n      this.z *= a.z;\n      return this;\n    } else if (b === undefined || c === undefined) {\n      b = c = a;\n    }\n\n    this.x *= a;\n    this.y *= b;\n    this.z *= c;\n    return this;\n  },\n  set: function (a, b, c) {\n    if (has.XYZ(a)) {\n      this.x = a.x;\n      this.y = a.y;\n      this.z = a.z;\n      return this;\n    } else if (b === undefined || c === undefined) {\n      b = c = a;\n    }\n\n    this.x = a;\n    this.y = b;\n    this.z = c;\n    return this;\n  },\n  setXY: function (v) {\n    this.x = v.x;\n    this.y = v.y;\n    return this;\n  },\n  shuffle: function (nIterations) {\n    var t;\n\n    for (var i = 0; i < nIterations; i++) {\n      switch (Math.floor(Math.random() * 3)) {\n        case 0:\n          t = this.x;\n          this.x = this.y;\n          this.z = t;\n          break;\n\n        case 1:\n          t = this.x;\n          this.x = this.z;\n          this.z = t;\n          break;\n\n        case 2:\n          t = this.y;\n          this.y = this.z;\n          this.z = t;\n          break;\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Replaces all vector components with the signum of their original values.\n   * In other words if a components value was negative its new value will be\n   * -1, if zero => 0, if positive => +1\n   *\n   * @return itself\n   */\n  signum: function () {\n    this.x = this.x < 0 ? -1 : this.x === 0 ? 0 : 1;\n    this.y = this.y < 0 ? -1 : this.y === 0 ? 0 : 1;\n    this.z = this.z < 0 ? -1 : this.z === 0 ? 0 : 1;\n    return this;\n  },\n  sub: function (a, b, c) {\n    if (has.XYZ(a)) {\n      return new Vec3D(this.x - a.x, this.y - a.y, this.z - a.z);\n    } else if (b === undefined || c === undefined) {\n      b = c = a;\n    }\n\n    return new Vec3D(this.x - a, this.y - b, this.z - c);\n  },\n  subSelf: function (a, b, c) {\n    if (has.XYZ(a)) {\n      this.x -= a.x;\n      this.y -= a.y;\n      this.z -= a.z;\n      return this;\n    } else if (b === undefined || c === undefined) {\n      b = c = a;\n    }\n\n    this.x -= a;\n    this.y -= b;\n    this.z -= c;\n    return this;\n  },\n  to2DXY: function () {\n    return new Vec2D(this.x, this.y);\n  },\n  to2DXZ: function () {\n    return new Vec2D(this.x, this.z);\n  },\n  to2DYZ: function () {\n    return new Vec2D(this.y, this.z);\n  },\n  toArray: function () {\n    return [this.x, this.y, this.z];\n  },\n  toArray4: function (w) {\n    var ta = this.toArray();\n    ta[3] = w;\n    return ta;\n  },\n  toCartesian: function () {\n    var a = this.x * Math.cos(this.z);\n    var xx = a * Math.cos(this.y);\n    var yy = this.x * Math.sin(this.z);\n    var zz = a * Math.sin(this.y);\n    this.x = xx;\n    this.y = yy;\n    this.z = zz;\n    return this;\n  },\n  toSpherical: function () {\n    var xx = Math.abs(this.x) <= mathUtils.EPS ? mathUtils.EPS : this.x;\n    var zz = this.z;\n    var radius = Math.sqrt(xx * xx + this.y * this.y + zz * zz);\n    this.z = Math.asin(this.y / radius);\n    this.y = Math.atan(zz / xx) + (xx < 0.0 ? Math.PI : 0);\n    this.x = radius;\n    return this;\n  },\n  toString: function () {\n    return \"[ x: \" + this.x + \", y: \" + this.y + \", z: \" + this.z + \"]\";\n  }\n};\n/**\n * Defines vector with all coords set to Float.MIN_VALUE. Useful for\n * bounding box operations.\n*/\n\nVec3D.MIN_VALUE = new Vec3D(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);\n/**\n * Defines vector with all coords set to Float.MAX_VALUE. Useful for\n * bounding box operations.\n*/\n\nVec3D.MAX_VALUE = new Vec3D(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n/**\n * Creates a new vector from the given angle in the XY plane. The Z\n * component of the vector will be zero.\n *\n * The resulting vector for theta=0 is equal to the positive X axis.\n *\n * @param theta\n *\t\t\t\tthe theta\n *\n * @return new vector in the XY plane\n */\n\nVec3D.fromXYTheta = function (theta) {\n  return new Vec3D(Math.cos(theta), Math.sin(theta), 0);\n};\n/**\n * Creates a new vector from the given angle in the XZ plane. The Y\n * component of the vector will be zero.\n *\n * The resulting vector for theta=0 is equal to the positive X axis.\n *\n * @param theta\n *\t\t\t\tthe theta\n *\n * @return new vector in the XZ plane\n */\n\n\nVec3D.fromXZTheta = function (theta) {\n  return new Vec3D(Math.cos(theta), 0, Math.sin(theta));\n};\n/**\n * Creates a new vector from the given angle in the YZ plane. The X\n * component of the vector will be zero.\n *\n * The resulting vector for theta=0 is equal to the positive Y axis.\n *\n * @param theta\n *\t\t\t\tthe theta\n *\n * @return new vector in the YZ plane\n */\n\n\nVec3D.fromYZTheta = function (theta) {\n  return new Vec3D(0, Math.cos(theta), Math.sin(theta));\n};\n/**\n * Constructs a new vector consisting of the largest components of both\n * vectors.\n *\n * @param b\n *\t\t\t\tthe b\n * @param a\n *\t\t\t\tthe a\n *\n * @return result as new vector\n */\n\n\nVec3D.max = function (a, b) {\n  return new Vec3D(Math.max(a.x, b.x), Math.max(a.y, b.y), Math.max(a.z, b.z));\n};\n/**\n * Constructs a new vector consisting of the smallest components of both\n * vectors.\n *\n * @param b\n *\t\t\t\tcomparing vector\n * @param a\n *\t\t\t\tthe a\n *\n * @return result as new vector\n */\n\n\nVec3D.min = function (a, b) {\n  return new Vec3D(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.min(a.z, b.z));\n};\n/**\n * Static factory method. Creates a new random unit vector using the Random\n * implementation set as default for the {@link MathUtils} class.\n *\n * @return a new random normalized unit vector.\n */\n\n\nVec3D.randomVector = function () {\n  var v = new Vec3D(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1);\n  return v.normalize();\n};\n\nVec3D.ZERO = new Vec3D(0, 0, 0);\nVec3D.X_AXIS = new Vec3D(1, 0, 0);\nVec3D.Y_AXIS = new Vec3D(0, 1, 0);\nVec3D.Z_AXIS = new Vec3D(0, 0, 1);\nVec3D.Axis = {\n  X: {\n    getVector: function () {\n      return Vec3D.X_AXIS;\n    },\n    toString: function () {\n      return \"Vec3D.Axis.X\";\n    }\n  },\n  Y: {\n    getVector: function () {\n      return Vec3D.Y_AXIS;\n    },\n    toString: function () {\n      return \"Vec3D.Axis.Y\";\n    }\n  },\n  Z: {\n    getVector: function () {\n      return Vec3D.Z_AXIS;\n    },\n    toString: function () {\n      return \"Vec3D.Axis.Z\";\n    }\n  }\n};\nexports.Vec2D = Vec2D;\nexports.Vec3D = Vec3D;","map":{"version":3,"sources":["C:/Users/alfor/Documents/GitHub/Don-t-WIne-About-Wine/node_modules/toxiclibsjs/geom/vectors.js"],"names":["mathUtils","require","has","is","hasXY","XY","isRect","Rect","Vec2D","Vec3D","a","b","y","x","Axis","X","getVector","X_AXIS","toString","Y","Y_AXIS","_getXY","temp","getXY","undefined","prototype","abs","Math","add","v","addSelf","angleBetween","faceNormalize","acos","dot","theta","getNormalized","clipNormalized","clear","compareTo","vec","magSquared","constrain","clip","width","height","copy","cross","distanceTo","dx","dy","sqrt","NaN","distanceToSquared","equals","obj","equalsWithTolerance","tolerance","floor","frac","getAbs","getComponent","id","getConstrained","r","getFloored","getFrac","getInverted","getLimited","lim","getNormalizedTo","normalize","len","normalizeTo","getPerpendicular","perpendicular","getReciprocal","reciprocal","getReflected","normal","reflect","getRotated","rotate","getSignum","signum","heading","atan2","interpolateTo","f","s","interpolate","interpolateToSelf","invert","isInCircle","sO","sR","d","sub","isInRectangle","rect","isInTriangle","c","v1","v2","v3","total_angles","TWO_PI","isMajorAxis","tol","ax","ay","itol","isZeroVector","EPS","jitter","normalizedRandom","limit","scaleSelf","magnitude","max","maxSelf","min","minSelf","mag","t","positiveHeading","dist","PI","set","scale","subSelf","co","cos","si","sin","xx","roundToAxis","setComponent","val","tangentNormalOfEllipse","eO","eR","p","xr2","yr2","toArray","toCartesian","toPolar","bisect","diff","sum","to3DXY","to3DXZ","to3DYZ","ZERO","MIN_VALUE","Number","MAX_VALUE","fromTheta","randomVector","rnd","random","z","XYZ","faceNormalizeBool","magSqaured","box_or_min","AABB","getMax","getMin","crossInto","result","vx","vy","vz","crossSelf","cx","cy","dz","box","length","getRotatedAroundAxis","vec_axis","rotateAroundAxis","getRotatedX","rotateX","getRotatedY","rotateY","getRotatedZ","rotateZ","headingXY","headingXZ","headingYZ","immutable","isInAABB","box_or_origin","boxExtent","w","az","modSelf","basex","basey","basez","ux","uy","uz","wx","wy","wz","yy","zz","setXY","shuffle","nIterations","i","to2DXY","to2DXZ","to2DYZ","toArray4","ta","toSpherical","radius","asin","atan","fromXYTheta","fromXZTheta","fromYZTheta","Z_AXIS","Z","exports"],"mappings":"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","sourcesContent":["\n\n\tvar mathUtils = require('../math/mathUtils');\n\tvar has = require('../internals/has'),\n\t\tis = require('../internals/is');\n\n\tvar hasXY = has.XY;\n\tvar isRect = is.Rect;\n\n\t//modules defined within\n\tvar Vec2D, Vec3D;\n\n\t/**\n\t@class a two-dimensional vector class\n\t*/\n\tVec2D = function(a,b){\n\t\tif( hasXY(a) ){\n\t\t\tb = a.y;\n\t\t\ta = a.x;\n\t\t} else {\n\t\t\ta = a || 0;\n\t\t\tb = b || 0;\n\t\t}\n\t\tthis.x = a;\n\t\tthis.y = b;\n\t};\n\n\tVec2D.Axis = {\n\t\tX: {\n\t\t\tgetVector: function(){ return Vec2D.X_AXIS; },\n\t\t\ttoString: function(){ return \"Vec2D.Axis.X\"; }\n\t\t},\n\t\tY: {\n\t\t\tgetVector: function(){ return Vec2D.Y_AXIS; },\n\t\t\ttoString: function(){ return \"Vec2D.Axis.Y\"; }\n\t\t}\n\t};\n\n\t//private,\n\tvar _getXY = (function(){\n\t\t//create a temp object to avoid creating garbage-collectable objects\n\t\tvar temp = { x: 0, y: 0 };\n\t\treturn function getXY(a,b) {\n\t\t\tif( a && typeof a.x === 'number' && typeof a.y === 'number' ){\n\t\t\t\treturn a;\n\t\t\t} else {\n\t\t\t\tif(a !== undefined && b === undefined){\n\t\t\t\t\tb = a;\n\t\t\t\t}\n\t\t\t\telse if(a === undefined){ a = 0; }\n\t\t\t\telse if(b === undefined){ b = 0; }\n\t\t\t}\n\t\t\ttemp.x = a;\n\t\t\ttemp.y = b;\n\t\t\treturn temp;\n\t\t};\n\t})();\n\t//public\n\tVec2D.prototype = {\n\n\t\tabs: function() {\n\t\t\tthis.x = Math.abs(this.x);\n\t\t\tthis.y = Math.abs(this.y);\n\t\t\treturn this;\n\t\t},\n\n\t\tadd: function(a, b) {\n\t\t\tvar v  = new Vec2D(a,b);\n\t\t\tv.x += this.x;\n\t\t\tv.y += this.y;\n\t\t\treturn v;\n\t\t},\n\n\t\t/**\n\t\t * Adds vector {a,b,c} and overrides coordinates with result.\n\t\t *\n\t\t * @param a\n\t\t *\t\t\t\tX coordinate\n\t\t * @param b\n\t\t *\t\t\t\tY coordinate\n\t\t * @return itself\n\t\t */\n\t\taddSelf: function(a,b) {\n\t\t\tvar v = _getXY(a,b);\n\t\t\tthis.x += v.x;\n\t\t\tthis.y += v.y;\n\t\t\treturn this;\n\t\t},\n\n\t\tangleBetween: function(v, faceNormalize) {\n\t\t\tif(faceNormalize === undefined){\n\t\t\t\treturn Math.acos(this.dot(v));\n\t\t\t}\n\t\t\tvar theta = (faceNormalize) ? this.getNormalized().dot(v.getNormalized()) : this.dot(v);\n\t\t\treturn Math.acos(mathUtils.clipNormalized(theta));\n\t\t},\n\n\t\t//bisect() is in Vec2D_post.js\n\n\t\t/**\n\t\t * Sets all vector components to 0.\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tclear: function() {\n\t\t\tthis.x = this.y = 0;\n\t\t\treturn this;\n\t\t},\n\n\t\tcompareTo: function(vec) {\n\t\t\tif (this.x == vec.x && this.y == vec.y) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn this.magSquared() - vec.magSquared();\n\t\t},\n\n\t\t/**\n\t\t * Forcefully fits the vector in the given rectangle.\n\t\t *\n\t\t * @param a\n\t\t *\t\teither a Rectangle by itself or the Vec2D min\n\t\t * @param b\n\t\t *\t\tVec2D max\n\t\t * @return itself\n\t\t */\n\t\tconstrain: function(a,b) {\n\t\t\tif( hasXY( a ) && hasXY( b ) ){\n\t\t\t\tthis.x = mathUtils.clip(this.x, a.x, b.x);\n\t\t\t\tthis.y = mathUtils.clip(this.y, a.y, b.y);\n\t\t\t} else if( isRect( a ) ){\n\t\t\t\tthis.x = mathUtils.clip(this.x, a.x, a.x + a.width);\n\t\t\t\tthis.y = mathUtils.clip(this.y, a.y, a.y + a.height);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tcopy: function() {\n\t\t\treturn new Vec2D(this);\n\t\t},\n\n\t\tcross: function(v) {\n\t\t\treturn (this.x * v.y) - (this.y * v.x);\n\t\t},\n\n\t\tdistanceTo: function(v) {\n\t\t\tif (v !== undefined) {\n\t\t\t\tvar dx = this.x - v.x;\n\t\t\t\tvar dy = this.y - v.y;\n\t\t\t\treturn Math.sqrt(dx * dx + dy * dy);\n\t\t\t} else {\n\t\t\t\treturn NaN;\n\t\t\t}\n\t\t},\n\n\t\tdistanceToSquared: function(v) {\n\t\t\tif (v !== undefined) {\n\t\t\t\tvar dx = this.x - v.x;\n\t\t\t\tvar dy = this.y - v.y;\n\t\t\t\treturn dx * dx + dy * dy;\n\t\t\t} else {\n\t\t\t\treturn NaN;\n\t\t\t}\n\t\t},\n\n\t\tdot: function(v) {\n\t\t\treturn this.x * v.x + this.y * v.y;\n\t\t},\n\n\t\tequals: function(obj) {\n\t\t\tif ( !hasXY( obj ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn this.x == obj.x && this.y == obj.y;\n\t\t},\n\n\t\tequalsWithTolerance: function(v, tolerance) {\n\t\t\tif( !hasXY( v ) ){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (mathUtils.abs(this.x - v.x) < tolerance) {\n\t\t\t\tif (mathUtils.abs(this.y - v.y) < tolerance) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tfloor: function() {\n\t\t\tthis.x = mathUtils.floor(this.x);\n\t\t\tthis.y = mathUtils.floor(this.y);\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Replaces the vector components with the fractional part of their current\n\t\t * values\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tfrac: function() {\n\t\t\tthis.x -= mathUtils.floor(this.x);\n\t\t\tthis.y -= mathUtils.floor(this.y);\n\t\t\treturn this;\n\t\t},\n\n\t\tgetAbs: function() {\n\t\t\treturn new Vec2D(this).abs();\n\t\t},\n\n\t\tgetComponent: function(id) {\n\t\t\tif(typeof id == 'number'){\n\t\t\t\tid = (id === 0) ? Vec2D.Axis.X : Vec2D.Axis.Y;\n\t\t\t}\n\t\t\tif(id == Vec2D.Axis.X){\n\t\t\t\treturn this.x;\n\t\t\t} else if(id == Vec2D.Axis.Y){\n\t\t\t\treturn this.y;\n\t\t\t}\n\t\t\treturn 0;\n\t\t},\n\n\t\tgetConstrained: function(r) {\n\t\t\treturn new Vec2D(this).constrain(r);\n\t\t},\n\n\t\tgetFloored: function() {\n\t\t\treturn new Vec2D(this).floor();\n\t\t},\n\n\t\tgetFrac: function() {\n\t\t\treturn new Vec2D(this).frac();\n\t\t},\n\n\t\tgetInverted: function() {\n\t\t\treturn new Vec2D(-this.x, -this.y);\n\t\t},\n\n\t\tgetLimited: function(lim) {\n\t\t\tif (this.magSquared() > lim * lim) {\n\t\t\t\treturn this.getNormalizedTo(lim);\n\t\t\t}\n\t\t\treturn new Vec2D(this);\n\t\t},\n\n\t\tgetNormalized: function() {\n\t\t\treturn new Vec2D(this).normalize();\n\t\t},\n\n\t\tgetNormalizedTo: function(len) {\n\t\t\treturn new Vec2D(this).normalizeTo(len);\n\t\t},\n\t\tgetPerpendicular: function() {\n\t\t\treturn new Vec2D(this).perpendicular();\n\t\t},\n\n\t\tgetReciprocal: function() {\n\t\t\treturn new Vec2D(this).reciprocal();\n\t\t},\n\n\t\tgetReflected: function(normal) {\n\t\t\treturn new Vec2D(this).reflect(normal);\n\t\t},\n\n\t\tgetRotated: function(theta) {\n\t\t\treturn new Vec2D(this).rotate(theta);\n\t\t},\n\n\t\tgetSignum: function() {\n\t\t\treturn new Vec2D(this).signum();\n\t\t},\n\n\t\theading: function() {\n\t\t\treturn Math.atan2(this.y, this.x);\n\t\t},\n\n\t\tinterpolateTo: function(v, f, s) {\n\t\t\tif(s === undefined){\n\t\t\t\treturn new Vec2D(this.x + (v.x -this.x) * f, this.y + (v.y - this.y) * f);\n\t\t\t} else\n\t\t\t{\n\t\t\t\treturn new Vec2D(s.interpolate(this.x,v.x,f),s.interpolate(this.y,v.y,f));\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Interpolates the vector towards the given target vector, using linear\n\t\t * interpolation\n\t\t *\n\t\t * @param v\n\t\t *\t\t\t\ttarget vector\n\t\t * @param f\n\t\t *\t\t\t\tinterpolation factor (should be in the range 0..1)\n\t\t * @return itself, result overrides current vector\n\t\t */\n\t\tinterpolateToSelf: function(v, f, s) {\n\t\t\tif(s === undefined) {\n\t\t\t\tthis.x += (v.x - this.x) * f;\n\t\t\t\tthis.y += (v.y - this.y) * f;\n\t\t\t} else {\n\t\t\t\tthis.x = s.interpolate(this.x,v.x,f);\n\t\t\t\tthis.y = s.interpolate(this.y,v.y,f);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tinvert: function() {\n\t\t\tthis.x *= -1;\n\t\t\tthis.y *= -1;\n\t\t\treturn this;\n\t\t},\n\n\t\tisInCircle: function(sO,sR) {\n\t\t\tvar d = this.sub(sO).magSquared();\n\t\t\treturn (d <= sR * sR);\n\t\t},\n\n\t\tisInRectangle: function(rect) {\n\t\t\tif (this.x < rect.x || this.x > rect.x + rect.width) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (this.y < rect.y || this.y > rect.y + rect.height) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\tisInTriangle: function(a,b,c) {\n\t\t\tvar v1 = this.sub(a).normalize();\n\t\t\tvar v2 = this.sub(b).normalize();\n\t\t\tvar v3 = this.sub(c).normalize();\n\n\t\t\tvar total_angles = Math.acos(v1.dot(v2));\n\t\t\ttotal_angles += Math.acos(v2.dot(v3));\n\t\t\ttotal_angles += Math.acos(v3.dot(v1));\n\n\t\t\treturn (Math.abs(total_angles - mathUtils.TWO_PI) <= 0.005);\n\t\t},\n\n\t\tisMajorAxis: function(tol) {\n\t\t\tvar ax = Math.abs(this.x);\n\t\t\tvar ay = Math.abs(this.y);\n\t\t\tvar itol = 1 - tol;\n\t\t\tif (ax > itol) {\n\t\t\t\treturn (ay < tol);\n\t\t\t} else if (ay > itol) {\n\t\t\t\treturn (ax < tol);\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tisZeroVector: function() {\n\t\t\treturn Math.abs(this.x) < mathUtils.EPS && Math.abs(this.y) < mathUtils.EPS;\n\t\t},\n\n\t\t/**\n\t\t * Adds random jitter to the vector in the range -j ... +j using the default\n\t\t * {@link Random} generator of {@link MathUtils}.\n\t\t *\n\t\t * @param a\n\t\t *\t\t\t\tmaximum x jitter or  Vec2D\n\t\t * @param b\n\t\t *\t\t\t\tmaximum y jitter or undefined\n\t\t * @return itself\n\t\t */\n\t\tjitter: function(a,b) {\n\t\t\tvar v = _getXY(a,b);\n\t\t\tthis.x += mathUtils.normalizedRandom() * v.x;\n\t\t\tthis.y += mathUtils.normalizedRandom() * v.y;\n\t\t\treturn this;\n\t\t},\n\n\t\tlimit: function(lim) {\n\t\t\tif (this.magSquared() > lim * lim) {\n\t\t\t\treturn this.normalize().scaleSelf(lim);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tmagnitude: function() {\n\t\t\treturn Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t},\n\n\t\tmagSquared: function() {\n\t\t\treturn this.x * this.x + this.y * this.y;\n\t\t},\n\n\t\tmax: function(v) {\n\t\t\treturn new Vec2D(mathUtils.max(this.x, v.x), mathUtils.max(this.y, v.y));\n\t\t},\n\n\t\tmaxSelf: function(v) {\n\t\t\tthis.x = mathUtils.max(this.x, v.x);\n\t\t\tthis.y = mathUtils.max(this.y, v.y);\n\t\t\treturn this;\n\t\t},\n\n\t\tmin: function(v) {\n\t\t\treturn new Vec2D(mathUtils.min(this.x, v.x), mathUtils.min(this.y, v.y));\n\t\t},\n\n\t\tminSelf: function(v) {\n\t\t\tthis.x = mathUtils.min(this.x, v.x);\n\t\t\tthis.y = mathUtils.min(this.y, v.y);\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Normalizes the vector so that its magnitude = 1\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tnormalize: function() {\n\t\t\tvar mag = this.x * this.x + this.y * this.y;\n\t\t\tif (mag > 0) {\n\t\t\t\tmag = 1.0 / Math.sqrt(mag);\n\t\t\t\tthis.x *= mag;\n\t\t\t\tthis.y *= mag;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Normalizes the vector to the given length.\n\t\t *\n\t\t * @param len\n\t\t *\t\t\t\tdesired length\n\t\t * @return itself\n\t\t */\n\t\tnormalizeTo: function(len) {\n\t\t\tvar mag = Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t\tif (mag > 0) {\n\t\t\t\tmag = len / mag;\n\t\t\t\tthis.x *= mag;\n\t\t\t\tthis.y *= mag;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tperpendicular: function() {\n\t\t\tvar t = this.x;\n\t\t\tthis.x = -this.y;\n\t\t\tthis.y = t;\n\t\t\treturn this;\n\t\t},\n\n\t\tpositiveHeading: function() {\n\t\t\tvar dist = Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t\tif (this.y >= 0){\n\t\t\t\treturn Math.acos(this.x / dist);\n\t\t\t}\n\t\t\treturn (Math.acos(-this.x / dist) + mathUtils.PI);\n\t\t},\n\n\t\treciprocal: function() {\n\t\t\tthis.x = 1.0 / this.x;\n\t\t\tthis.y = 1.0 / this.y;\n\t\t\treturn this;\n\t\t},\n\n\t\treflect: function(normal) {\n\t\t\treturn this.set(normal.scale(this.dot(normal) * 2).subSelf(this));\n\t\t},\n\n\t\t/**\n\t\t * Rotates the vector by the given angle around the Z axis.\n\t\t *\n\t\t * @param theta\n\t\t * @return itself\n\t\t */\n\t\trotate: function(theta) {\n\t\t\tvar co = Math.cos(theta);\n\t\t\tvar si = Math.sin(theta);\n\t\t\tvar xx = co * this.x - si * this.y;\n\t\t\tthis.y = si * this.x + co * this.y;\n\t\t\tthis.x = xx;\n\t\t\treturn this;\n\t\t},\n\n\t\troundToAxis: function() {\n\t\t\tif (Math.abs(this.x) < 0.5) {\n\t\t\t\tthis.x = 0;\n\t\t\t} else {\n\t\t\t\tthis.x = this.x < 0 ? -1 : 1;\n\t\t\t\tthis.y = 0;\n\t\t\t}\n\t\t\tif (Math.abs(this.y) < 0.5) {\n\t\t\t\tthis.y = 0;\n\t\t\t} else {\n\t\t\t\tthis.y = this.y < 0 ? -1 : 1;\n\t\t\t\tthis.x = 0;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tscale: function(a, b) {\n\t\t\tvar v = _getXY(a,b);\n\t\t\treturn new Vec2D(this.x * v.x, this.y * v.y);\n\t\t},\n\n\t\tscaleSelf: function(a,b) {\n\t\t\tvar v = _getXY(a,b);\n\t\t\tthis.x *= v.x;\n\t\t\tthis.y *= v.y;\n\t\t\treturn this;\n\t\t},\n\n\t\tset: function(a,b){\n\t\t\tvar v = _getXY(a,b);\n\t\t\tthis.x = v.x;\n\t\t\tthis.y = v.y;\n\t\t\treturn this;\n\t\t},\n\n\t\tsetComponent: function(id, val) {\n\t\t\tif(typeof id == 'number')\n\t\t\t{\n\t\t\t\tid = (id === 0) ? Vec2D.Axis.X : Vec2D.Axis.Y;\n\t\t\t}\n\t\t\tif(id === Vec2D.Axis.X){\n\t\t\t\tthis.x = val;\n\t\t\t} else if(id === Vec2D.Axis.Y){\n\t\t\t\tthis.y = val;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Replaces all vector components with the signum of their original values.\n\t\t * In other words if a components value was negative its new value will be\n\t\t * -1, if zero => 0, if positive => +1\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tsignum: function() {\n\t\t\tthis.x = (this.x < 0 ? -1 : this.x === 0 ? 0 : 1);\n\t\t\tthis.y = (this.y < 0 ? -1 : this.y === 0 ? 0 : 1);\n\t\t\treturn this;\n\t\t},\n\n\t\tsub: function(a,b){\n\t\t\tvar v = _getXY(a,b);\n\t\t\treturn new Vec2D(this.x -v.x,this.y - v.y);\n\t\t},\n\n\t\t/**\n\t\t * Subtracts vector {a,b,c} and overrides coordinates with result.\n\t\t *\n\t\t * @param a\n\t\t *\t\t\t\tX coordinate\n\t\t * @param b\n\t\t *\t\t\t\tY coordinate\n\t\t * @return itself\n\t\t */\n\t\tsubSelf: function(a,b) {\n\t\t\tvar v = _getXY(a,b);\n\t\t\tthis.x -= v.x;\n\t\t\tthis.y -= v.y;\n\t\t\treturn this;\n\t\t},\n\n\t\ttangentNormalOfEllipse: function(eO,eR) {\n\t\t\tvar p = this.sub(eO);\n\n\t\t\tvar xr2 = eR.x * eR.x;\n\t\t\tvar yr2 = eR.y * eR.y;\n\n\t\t\treturn new Vec2D(p.x / xr2, p.y / yr2).normalize();\n\t\t},\n\n\n\t\t//to3D** methods are in Vec2D_post.js\n\n\t\ttoArray: function() {\n\t\t\treturn [this.x,this.y];\n\t\t},\n\n\t\ttoCartesian: function() {\n\t\t\tvar xx = (this.x * Math.cos(this.y));\n\t\t\tthis.y = (this.x * Math.sin(this.y));\n\t\t\tthis.x = xx;\n\t\t\treturn this;\n\t\t},\n\n\t\ttoPolar: function() {\n\t\t\tvar r = Math.sqrt(this.x * this.x + this.y * this.y);\n\t\t\tthis.y = Math.atan2(this.y, this.x);\n\t\t\tthis.x = r;\n\t\t\treturn this;\n\t\t},\n\n\t\ttoString: function() {\n\t\t\tvar s = \"{x:\"+this.x+\", y:\"+this.y+\"}\";\n\t\t\treturn s;\n\t\t}\n\n\t};\n\n\t//these requires are in the functions because of a circular dependency\n\tVec2D.prototype.bisect = function(b) {\n\t\tvar diff = this.sub(b);\n\t\tvar sum = this.add(b);\n\t\tvar dot = diff.dot(sum);\n\t\treturn new Vec3D(diff.x, diff.y, -dot / 2);\n\t};\n\n\tVec2D.prototype.to3DXY = function() {\n\t\treturn new Vec3D(this.x, this.y, 0);\n\t};\n\n\tVec2D.prototype.to3DXZ = function() {\n\t\treturn new Vec3D(this.x, 0, this.y);\n\t};\n\n\tVec2D.prototype.to3DYZ = function() {\n\t\treturn new Vec3D(0, this.x, this.y);\n\t};\n\n\tVec2D.X_AXIS = new Vec2D(1,0);\n\tVec2D.Y_AXIS = new Vec2D(0,1);\n\tVec2D.ZERO = new Vec2D();\n\tVec2D.MIN_VALUE = new Vec2D(Number.MIN_VALUE,Number.MIN_VALUE);\n\tVec2D.MAX_VALUE = new Vec2D(Number.MAX_VALUE, Number.MAX_VALUE);\n\tVec2D.fromTheta = function(theta){\n\t\treturn new Vec2D(Math.cos(theta),Math.sin(theta));\n\t};\n\tVec2D.max = function(a,b){\n\t\treturn new Vec2D(mathUtils.max(a.x,b.x), mathUtils.max(a.y,b.y));\n\t};\n\n\tVec2D.min = function(a, b) {\n\t\treturn new Vec2D(mathUtils.min(a.x, b.x), mathUtils.min(a.y, b.y));\n\t};\n\n\tVec2D.randomVector = function(rnd){\n\t\tvar v = new Vec2D(Math.random()*2 - 1, Math.random() * 2 - 1);\n\t\treturn v.normalize();\n\t};\n\n\t/**\n\t * @member toxi\n\t * @class Creates a new vector with the given coordinates. Coordinates will default to zero\n\t * @param {Number} x the x\n\t * @param {Number} y the y\n\t * @param {Number} z the z\n\t */\n\tVec3D = function(x, y, z){\n\t\tif( has.XYZ( x ) ){\n\t\t\tthis.x = x.x;\n\t\t\tthis.y = x.y;\n\t\t\tthis.z = x.z;\n\t\t} else if(x === undefined){ //if none or all were passed\n\t\t\tthis.x = 0.0;\n\t\t\tthis.y = 0.0;\n\t\t\tthis.z = 0.0;\n\t\t} else {\n\t\t\tthis.x = x;\n\t\t\tthis.y = y;\n\t\t\tthis.z = z;\n\t\t}\n\t};\n\n\tVec3D.prototype = {\n\n\t\tabs: function(){\n\t\t\tthis.x = Math.abs(this.x);\n\t\t\tthis.y = Math.abs(this.y);\n\t\t\tthis.z = Math.abs(this.z);\n\t\t\treturn this;\n\t\t},\n\n\t\tadd: function(a,b,c){\n\t\t\tif( has.XYZ( a ) ){\n\t\t\t\treturn new Vec3D(this.x+a.x,this.y+a.y,this.z+a.z);\n\t\t\t}\n\t\t\treturn new Vec3D(this.x+a,this.y+b,this.z+c);\n\n\t\t},\n\t\t/**\n\t\t * Adds vector {a,b,c} and overrides coordinates with result.\n\t\t *\n\t\t * @param a\n\t\t *\t\t\t\tX coordinate\n\t\t * @param b\n\t\t *\t\t\t\tY coordinate\n\t\t * @param c\n\t\t *\t\t\t\tZ coordinate\n\t\t * @return itself\n\t\t */\n\t\taddSelf: function(a,b,c){\n\t\t\tif(a !== undefined && b!== undefined && c !== undefined){\n\t\t\t\tthis.x += a;\n\t\t\t\tthis.y += b;\n\t\t\t\tthis.z += c;\n\t\t\t} else {\n\t\t\t\tthis.x += a.x;\n\t\t\t\tthis.y += a.y;\n\t\t\t\tthis.z += a.z;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tangleBetween: function(vec, faceNormalizeBool){\n\t\t\tvar theta;\n\t\t\tif(faceNormalizeBool){\n\t\t\t\ttheta = this.getNormalized().dot(vec.getNormalized());\n\t\t\t} else {\n\t\t\t\ttheta = this.dot(vec);\n\t\t\t}\n\t\t\treturn Math.acos(theta);\n\t\t},\n\n\n\t\tclear: function(){\n\t\t\tthis.x = this.y = this.z = 0;\n\t\t\treturn this;\n\t\t},\n\n\t\tcompareTo: function(vec){\n\t\t\tif(this.x == vec.x && this.y == vec.y && this.z == vec.z){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\treturn (this.magSquared() - vec.magSqaured());\n\t\t},\n\t\t/**\n\t\t * Forcefully fits the vector in the given AABB specified by the 2 given\n\t\t * points.\n\t\t *\n\t\t * @param box_or_min\n\t\t *\t\teither the AABB box by itself, or your min Vec3D with accompanying max\n\t\t * @param max\n\t\t * @return itself\n\t\t */\n\t\tconstrain: function(box_or_min, max){\n\t\t\tvar min;\n\t\t\tif( is.AABB( box_or_min ) ){\n\t\t\t\tmax = box_or_min.getMax();\n\t\t\t\tmin = box_or_min.getMin();\n\t\t\t} else {\n\t\t\t\tmin = box_or_min;\n\t\t\t}\n\t\t\tthis.x = mathUtils.clip(this.x, min.x, max.x);\n\t\t\tthis.y = mathUtils.clip(this.y, min.y, max.y);\n\t\t\tthis.z = mathUtils.clip(this.z, min.z, max.z);\n\t\t\treturn this;\n\t\t},\n\n\t\tcopy: function(){\n\t\t\treturn new Vec3D(this);\n\t\t},\n\n\t\tcross: function(vec){\n\t\t\treturn new Vec3D(this.y*vec.z - vec.y * this.z, this.z * vec.x - vec.z * this.x,this.x * vec.y - vec.x * this.y);\n\t\t},\n\n\t\tcrossInto: function(vec, result){\n\t\t\tvar vx = vec.x;\n\t\t\tvar vy = vec.y;\n\t\t\tvar vz = vec.z;\n\t\t\tresult.x = this.y * vz - vy * this.z;\n\t\t\tresult.y = this.z * vx-vz * this.x;\n\t\t\tresult.z = this.x * vy - vx * this.y;\n\t\t\treturn result;\n\t\t},\n\t\t/**\n\t\t * Calculates cross-product with vector v. The resulting vector is\n\t\t * perpendicular to both the current and supplied vector and overrides the\n\t\t * current.\n\t\t *\n\t\t * @param v\n\t\t *\t\t\t\tthe v\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tcrossSelf: function(vec){\n\t\t\tvar cx = this.y * vec.z - vec.y * this.z;\n\t\t\tvar cy = this.z * vec.x - vec.z * this.x;\n\t\t\tthis.z = this.x * vec.y - vec.x * this.y;\n\t\t\tthis.y = cy;\n\t\t\tthis.x = cx;\n\t\t\treturn this;\n\t\t},\n\n\t\tdistanceTo: function(vec){\n\t\t\tif(vec !== undefined){\n\t\t\t\tvar dx = this.x - vec.x;\n\t\t\t\tvar dy = this.y - vec.y;\n\t\t\t\tvar dz = this.z - vec.z;\n\t\t\t\treturn Math.sqrt(dx * dx + dy * dy + dz * dz);\n\t\t\t}\n\t\t\treturn NaN;\n\t\t},\n\n\t\tdistanceToSquared: function(vec){\n\t\t\tif(vec !== undefined){\n\t\t\t\tvar dx = this.x - vec.x;\n\t\t\t\tvar dy = this.y - vec.y;\n\t\t\t\tvar dz = this.z - vec.z;\n\t\t\t\treturn dx * dx + dy*dy + dz*dz;\n\t\t\t}\n\t\t\treturn NaN;\n\t\t},\n\n\t\tdot: function(vec){\n\t\t\treturn this.x * vec.x + this.y * vec.y + this.z * vec.z;\n\t\t},\n\n\t\tequals: function(vec){\n\t\t\tif( has.XYZ( vec ) ){\n\t\t\t\treturn this.x == vec.x && this.y == vec.y && this.z == vec.z;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tequalsWithTolerance: function(vec,tolerance){\n\t\t\tif(Math.abs(this.x-vec.x) < tolerance){\n\t\t\t\tif(Math.abs(this.y - vec.y) < tolerance){\n\t\t\t\t\tif(Math.abs(this.z - vec.z) < tolerance){\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tfloor: function(){\n\t\t\tthis.x = Math.floor(this.x);\n\t\t\tthis.y = Math.floor(this.y);\n\t\t\tthis.z = Math.floor(this.z);\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Replaces the vector components with the fractional part of their current\n\t\t * values.\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tfrac: function(){\n\t\t\tthis.x -= Math.floor(this.x);\n\t\t\tthis.y -= Math.floor(this.y);\n\t\t\tthis.z -= Math.floor(this.z);\n\t\t\treturn this;\n\t\t},\n\n\t\tgetAbs: function(){\n\t\t\treturn new Vec3D(this).abs();\n\t\t},\n\n\t\tgetComponent: function(id){\n\t\t\tif(typeof(id) == 'number'){\n\t\t\t\tif(id === Vec3D.Axis.X){\n\t\t\t\t\tid = 0;\n\t\t\t\t} else if(id === Vec3D.Axis.Y){\n\t\t\t\t\tid = 1;\n\t\t\t\t} else {\n\t\t\t\t\tid = 2;\n\t\t\t\t}\n\t\t\t}\n\t\t\tswitch(id){\n\t\t\t\tcase 0:\n\t\t\t\treturn this.x;\n\t\t\t\tcase 1:\n\t\t\t\treturn this.y;\n\t\t\t\tcase 2:\n\t\t\t\treturn this.z;\n\t\t\t}\n\t\t},\n\n\t\tgetConstrained: function(box){\n\t\t\treturn new Vec3D(this).constrain(box);\n\t\t},\n\n\t\tgetFloored: function(){\n\t\t\treturn new Vec3D(this).floor();\n\t\t},\n\n\t\tgetFrac: function(){\n\t\t\treturn new Vec3D(this).frac();\n\t\t},\n\n\t\tgetInverted: function(){\n\t\t\treturn new Vec3D(-this.x,-this.y,-this.z);\n\t\t},\n\n\t\tgetLimited: function(limit){\n\t\t\tif(this.magSquared() > limit * limit){\n\t\t\t\treturn this.getNormalizedTo(limit);\n\t\t\t}\n\t\t\treturn new Vec3D(this);\n\t\t},\n\n\t\tgetNormalized: function(){\n\t\t\treturn new Vec3D(this).normalize();\n\t\t},\n\n\t\tgetNormalizedTo: function(length){\n\t\t\treturn new Vec3D(this).normalizeTo(length);\n\t\t},\n\n\t\tgetReciprocal: function(){\n\t\t\treturn this.copy().reciprocal();\n\t\t},\n\n\t\tgetReflected: function(normal){\n\t\t\treturn this.copy().reflect(normal);\n\t\t},\n\n\t\tgetRotatedAroundAxis: function(vec_axis,theta){\n\t\t\treturn new Vec3D(this).rotateAroundAxis(vec_axis,theta);\n\t\t},\n\n\t\tgetRotatedX: function(theta){\n\t\t\treturn new Vec3D(this).rotateX(theta);\n\t\t},\n\n\t\tgetRotatedY: function(theta){\n\t\t\treturn new Vec3D(this).rotateY(theta);\n\t\t},\n\n\t\tgetRotatedZ: function(theta){\n\t\t\treturn new Vec3D(this).rotateZ(theta);\n\t\t},\n\n\t\tgetSignum: function(){\n\t\t\treturn new Vec3D(this).signum();\n\t\t},\n\n\t\theadingXY: function(){\n\t\t\treturn Math.atan2(this.y,this.x);\n\t\t},\n\n\t\theadingXZ: function(){\n\t\t\treturn Math.atan2(this.z,this.x);\n\t\t},\n\n\t\theadingYZ: function(){\n\t\t\treturn Math.atan2(this.y,this.z);\n\t\t},\n\n\t\timmutable: function(){\n\t\t\treturn this; //cant make read-only in javascript, implementing to avoid error\n\t\t},\n\n\t\tinterpolateTo: function(v,f,s) {\n\t\t\tif(s === undefined){\n\t\t\t\treturn new Vec3D(this.x + (v.x - this.x)*f, this.y + (v.y - this.y) * f, this.z + (v.z - this.z)*f);\n\t\t\t}\n\t\t\treturn new Vec3D(s.interpolate(this.y,v.y,f),s.interpolate(this.y,v.y,f),s.interpolate(this.z,v.z,f));\n\n\t\t},\n\n\t\tinterpolateToSelf: function(v,f,s){\n\t\t\tif(s === undefined){\n\t\t\t\tthis.x += (v.x-this.x)*f;\n\t\t\t\tthis.y += (v.y-this.y)*f;\n\t\t\t\tthis.z += (v.z-this.z)*f;\n\t\t\t} else {\n\t\t\t\tthis.x = s.interpolate(this.x,v.x,f);\n\t\t\t\tthis.y = s.interpolate(this.y,v.y,f);\n\t\t\t\tthis.z = s.interpolate(this.z,v.z,f);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tinvert: function(){\n\t\t\tthis.x *= -1;\n\t\t\tthis.y *= -1;\n\t\t\tthis.z *= -1;\n\t\t\treturn this;\n\t\t},\n\n\t\tisInAABB: function(box_or_origin, boxExtent){\n\t\t\tif(boxExtent) {\n\t\t\t\tvar w = boxExtent.x;\n\t\t\t\tif(this.x < box_or_origin.x - w || this.x > box_or_origin.x + w){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tw = boxExtent.y;\n\t\t\t\tif(this.y < box_or_origin.y - w || this.y > box_or_origin.y + w){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tw = boxExtent.y;\n\t\t\t\tif(this.z < box_or_origin.z - w || this.y > box_or_origin.z + w){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar min = box_or_origin.getMin(),\n\t\t\t\t\tmax = box_or_origin.getMax();\n\t\t\t\tif (this.x < min.x || this.x > max.x) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.y < min.y || this.y > max.y) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (this.z < min.z || this.z > max.z) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\tisMajorAxis: function(tol){\n\t\t\tvar ax = mathUtils.abs(this.x);\n\t\t\tvar ay = mathUtils.abs(this.y);\n\t\t\tvar az = mathUtils.abs(this.z);\n\t\t\tvar itol = 1 - tol;\n\t\t\tif (ax > itol) {\n\t\t\t\tif (ay < tol) {\n\t\t\t\t\treturn (az < tol);\n\t\t\t\t}\n\t\t\t} else if (ay > itol) {\n\t\t\t\tif (ax < tol) {\n\t\t\t\t\treturn (az < tol);\n\t\t\t\t}\n\t\t\t} else if (az > itol) {\n\t\t\t\tif (ax < tol) {\n\t\t\t\t\treturn (ay < tol);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\n\t\tisZeroVector: function(){\n\t\t\treturn Math.abs(this.x) < mathUtils.EPS && Math.abs(this.y) < mathUtils.EPS && mathUtils.abs(this.z) < mathUtils.EPS;\n\t\t},\n\n\t\t/**\n\t\t * Add random jitter to the vector in the range -j ... +j using the default\n\t\t * {@link Random} generator of {@link MathUtils}.\n\t\t *\n\t\t * @param j\n\t\t *\t\t\t\tthe j\n\t\t *\n\t\t * @return the vec3 d\n\t\t */\n\t\tjitter: function(a,b,c){\n\t\t\tif(b === undefined || c === undefined){\n\t\t\t\tb = c = a;\n\t\t\t}\n\t\t\tthis.x += mathUtils.normalizedRandom()*a;\n\t\t\tthis.y += mathUtils.normalizedRandom()*b;\n\t\t\tthis.z += mathUtils.normalizedRandom()*c;\n\t\t\treturn this;\n\t\t},\n\n\t\tlimit: function(lim){\n\t\t\tif(this.magSquared() > lim * lim){\n\t\t\t\treturn this.normalize().scaleSelf(lim);\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tmagnitude: function(){\n\t\t\treturn Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);\n\t\t},\n\n\t\tmagSquared: function(){\n\t\t\treturn this.x*this.x+this.y*this.y+this.z*this.z;\n\t\t},\n\n\t\tmaxSelf: function(vec){\n\t\t\tthis.x = Math.max(this.x,vec.x);\n\t\t\tthis.y = Math.max(this.y,vec.y);\n\t\t\tthis.z = Math.max(this.z,vec.z);\n\t\t\treturn this;\n\t\t},\n\n\t\tminSelf: function(vec){\n\t\t\tthis.x = Math.min(this.x,vec.x);\n\t\t\tthis.y = Math.min(this.y,vec.y);\n\t\t\tthis.z = Math.min(this.z,vec.z);\n\t\t\treturn this;\n\t\t},\n\n\t\tmodSelf: function(basex,basey,basez){\n\t\t\tif(basey === undefined || basez === undefined){\n\t\t\t\tbasey = basez = basex;\n\t\t\t}\n\t\t\tthis.x %= basex;\n\t\t\tthis.y %= basey;\n\t\t\tthis.z %= basez;\n\t\t\treturn this;\n\t\t},\n\n\t\tnormalize: function(){\n\t\t\tvar mag = Math.sqrt(this.x*this.x + this.y * this.y + this.z * this.z);\n\t\t\tif(mag > 0) {\n\t\t\t\tmag = 1.0 / mag;\n\t\t\t\tthis.x *= mag;\n\t\t\t\tthis.y *= mag;\n\t\t\t\tthis.z *= mag;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tnormalizeTo: function(length){\n\t\t\tvar mag = Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);\n\t\t\tif(mag>0){\n\t\t\t\tmag = length / mag;\n\t\t\t\tthis.x *= mag;\n\t\t\t\tthis.y *= mag;\n\t\t\t\tthis.z *= mag;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\treciprocal: function(){\n\t\t\tthis.x = 1.0 / this.x;\n\t\t\tthis.y = 1.0 / this.y;\n\t\t\tthis.z = 1.0 / this.z;\n\t\t\treturn this;\n\t\t},\n\n\t\treflect: function(normal){\n\t\t\treturn this.set(normal.scale(this.dot(normal)*2).subSelf(this));\n\t\t},\n\t\t/**\n\t\t * Rotates the vector around the giving axis.\n\t\t *\n\t\t * @param axis\n\t\t *\t\t\t\trotation axis vector\n\t\t * @param theta\n\t\t *\t\t\t\trotation angle (in radians)\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\trotateAroundAxis: function(vec_axis,theta){\n\t\t\tvar ax = vec_axis.x,\n\t\t\t\tay = vec_axis.y,\n\t\t\t\taz = vec_axis.z,\n\t\t\t\tux = ax * this.x,\n\t\t\t\tuy = ax * this.y,\n\t\t\t\tuz = ax * this.z,\n\t\t\t\tvx = ay * this.x,\n\t\t\t\tvy = ay * this.y,\n\t\t\t\tvz = ay * this.z,\n\t\t\t\twx = az * this.x,\n\t\t\t\twy = az * this.y,\n\t\t\t\twz = az * this.z,\n\t\t\t\tsi = Math.sin(theta),\n\t\t\t\tco = Math.cos(theta);\n\t\t\tvar xx = (ax * (ux + vy + wz) + (this.x * (ay * ay + az * az) - ax * (vy + wz)) * co + (-wy + vz) * si);\n\t\t\tvar yy = (ay * (ux + vy + wz) + (this.y * (ax * ax + az * az) - ay * (ux + wz)) * co + (wx - uz) * si);\n\t\t\tvar zz = (az * (ux + vy + wz) + (this.z * (ax * ax + ay * ay) - az * (ux + vy)) * co + (-vx + uy) * si);\n\t\t\tthis.x = xx;\n\t\t\tthis.y = yy;\n\t\t\tthis.z = zz;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Rotates the vector by the given angle around the X axis.\n\t\t *\n\t\t * @param theta\n\t\t *\t\t\t\tthe theta\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\trotateX: function(theta){\n\t\t\tvar co = Math.cos(theta);\n\t\t\tvar si = Math.sin(theta);\n\t\t\tvar zz = co *this.z - si * this.y;\n\t\t\tthis.y = si * this.z + co * this.y;\n\t\t\tthis.z = zz;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Rotates the vector by the given angle around the Y axis.\n\t\t *\n\t\t * @param theta\n\t\t *\t\t\t\tthe theta\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\trotateY:function(theta) {\n\t\t\tvar co = Math.cos(theta);\n\t\t\tvar si = Math.sin(theta);\n\t\t\tvar xx = co * this.x - si * this.z;\n\t\t\tthis.z = si * this.x + co * this.z;\n\t\t\tthis.x = xx;\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Rotates the vector by the given angle around the Z axis.\n\t\t *\n\t\t * @param theta\n\t\t *\t\t\t\tthe theta\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\trotateZ:function(theta) {\n\t\t\tvar co = Math.cos(theta);\n\t\t\tvar si = Math.sin(theta);\n\t\t\tvar xx = co * this.x - si * this.y;\n\t\t\tthis.y = si * this.x + co * this.y;\n\t\t\tthis.x = xx;\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Rounds the vector to the closest major axis. Assumes the vector is\n\t\t * normalized.\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\troundToAxis:function() {\n\t\t\tif (Math.abs(this.x) < 0.5) {\n\t\t\t\tthis.x = 0;\n\t\t\t} else {\n\t\t\t\tthis.x = this.x < 0 ? -1 : 1;\n\t\t\t\tthis.y = this.z = 0;\n\t\t\t}\n\t\t\tif (Math.abs(this.y) < 0.5) {\n\t\t\t\tthis.y = 0;\n\t\t\t} else {\n\t\t\t\tthis.y = this.y < 0 ? -1 : 1;\n\t\t\t\tthis.x = this.z = 0;\n\t\t\t}\n\t\t\tif (Math.abs(this.z) < 0.5) {\n\t\t\t\tthis.z = 0;\n\t\t\t} else {\n\t\t\t\tthis.z = this.z < 0 ? -1 : 1;\n\t\t\t\tthis.x = this.y = 0;\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\n\t\tscale:function(a,b,c) {\n\t\t\tif( has.XYZ( a ) ) { //if it was a vec3d that was passed\n\t\t\t\treturn new Vec3D(this.x * a.x, this.y * a.y, this.z * a.z);\n\t\t\t}\n\t\t\telse if(b === undefined || c === undefined) { //if only one float was passed\n\t\t\t\tb = c = a;\n\t\t\t}\n\t\t\treturn new Vec3D(this.x * a, this.y * b, this.z * c);\n\t\t},\n\n\t\tscaleSelf: function(a,b,c) {\n\t\t\tif( has.XYZ( a ) ){\n\t\t\t\tthis.x *= a.x;\n\t\t\t\tthis.y *= a.y;\n\t\t\t\tthis.z *= a.z;\n\t\t\t\treturn this;\n\t\t\t} else if(b === undefined || c === undefined) {\n\t\t\t\tb = c = a;\n\t\t\t}\n\t\t\tthis.x *= a;\n\t\t\tthis.y *= b;\n\t\t\tthis.z *= c;\n\t\t\treturn this;\n\t\t},\n\n\t\tset: function(a,b,c){\n\t\t\tif( has.XYZ( a ) )\n\t\t\t{\n\t\t\t\tthis.x = a.x;\n\t\t\t\tthis.y = a.y;\n\t\t\t\tthis.z = a.z;\n\t\t\t\treturn this;\n\t\t\t} else if(b === undefined || c === undefined) {\n\t\t\t\tb = c = a;\n\t\t\t}\n\t\t\tthis.x = a;\n\t\t\tthis.y = b;\n\t\t\tthis.z = c;\n\t\t\treturn this;\n\t\t},\n\n\t\tsetXY: function(v){\n\t\t\tthis.x = v.x;\n\t\t\tthis.y = v.y;\n\t\t\treturn this;\n\t\t},\n\n\t\tshuffle:function(nIterations){\n\t\t\tvar t;\n\t\t\tfor(var i=0;i<nIterations;i++) {\n\t\t\t\tswitch(Math.floor(Math.random()*3)){\n\t\t\t\t\tcase 0:\n\t\t\t\t\tt = this.x;\n\t\t\t\t\tthis.x = this.y;\n\t\t\t\t\tthis.z = t;\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\tt = this.x;\n\t\t\t\t\tthis.x = this.z;\n\t\t\t\t\tthis.z = t;\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\tt = this.y;\n\t\t\t\t\tthis.y = this.z;\n\t\t\t\t\tthis.z = t;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Replaces all vector components with the signum of their original values.\n\t\t * In other words if a components value was negative its new value will be\n\t\t * -1, if zero => 0, if positive => +1\n\t\t *\n\t\t * @return itself\n\t\t */\n\t\tsignum: function(){\n\t\t\tthis.x = (this.x < 0 ? -1 : this.x === 0 ? 0 : 1);\n\t\t\tthis.y = (this.y < 0 ? -1 : this.y === 0 ? 0 : 1);\n\t\t\tthis.z = (this.z < 0 ? -1 : this.z === 0 ? 0 : 1);\n\t\t\treturn this;\n\t\t},\n\n\t\tsub: function(a,b,c){\n\t\t\tif( has.XYZ( a ) ){\n\t\t\t\treturn\tnew Vec3D(this.x - a.x, this.y - a.y, this.z - a.z);\n\t\t\t} else if(b === undefined || c === undefined) {\n\t\t\t\tb = c = a;\n\t\t\t}\n\t\t\treturn new Vec3D(this.x - a, this.y - b, this.z - c);\n\t\t},\n\n\t\tsubSelf: function(a,b,c){\n\t\t\tif( has.XYZ( a ) ){\n\t\t\t\tthis.x -= a.x;\n\t\t\t\tthis.y -= a.y;\n\t\t\t\tthis.z -= a.z;\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\telse if(b === undefined || c === undefined){\n\t\t\t\tb = c= a;\n\t\t\t}\n\t\t\tthis.x -= a;\n\t\t\tthis.y -= b;\n\t\t\tthis.z -= c;\n\t\t\treturn this;\n\t\t},\n\n\t\tto2DXY: function(){\n\t\t\treturn new Vec2D(this.x,this.y);\n\t\t},\n\n\t\tto2DXZ: function(){\n\t\t\treturn new Vec2D(this.x,this.z);\n\t\t},\n\n\t\tto2DYZ: function(){\n\t\t\treturn new Vec2D(this.y,this.z);\n\t\t},\n\n\t\ttoArray: function(){\n\t\t\treturn [this.x,this.y,this.z];\n\t\t},\n\n\t\ttoArray4:function(w){\n\t\t\tvar ta = this.toArray();\n\t\t\tta[3] = w;\n\t\t\treturn ta;\n\t\t},\n\n\t\ttoCartesian: function(){\n\t\t\tvar a = (this.x * Math.cos(this.z));\n\t\t\tvar xx = (a * Math.cos(this.y));\n\t\t\tvar yy = (this.x * Math.sin(this.z));\n\t\t\tvar zz = (a * Math.sin(this.y));\n\t\t\tthis.x = xx;\n\t\t\tthis.y = yy;\n\t\t\tthis.z = zz;\n\t\t\treturn this;\n\t\t},\n\n\t\ttoSpherical: function(){\n\t\t\tvar xx = Math.abs(this.x) <= mathUtils.EPS ? mathUtils.EPS : this.x;\n\t\t\tvar zz = this.z;\n\n\t\t\tvar radius = Math.sqrt((xx * xx) + (this.y * this.y) + (zz * zz));\n\t\t\tthis.z = Math.asin(this.y / radius);\n\t\t\tthis.y = Math.atan(zz / xx) + (xx < 0.0 ? Math.PI : 0);\n\t\t\tthis.x = radius;\n\t\t\treturn this;\n\t\t},\n\n\t\ttoString: function(){\n\t\t\treturn \"[ x: \"+this.x+ \", y: \"+this.y+ \", z: \"+this.z+\"]\";\n\t\t}\n\t};\n\t/**\n\t * Defines vector with all coords set to Float.MIN_VALUE. Useful for\n\t * bounding box operations.\n\t*/\n\tVec3D.MIN_VALUE = new Vec3D(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);\n\t/**\n\t * Defines vector with all coords set to Float.MAX_VALUE. Useful for\n\t * bounding box operations.\n\t*/\n\tVec3D.MAX_VALUE = new Vec3D(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);\n\t/**\n\t * Creates a new vector from the given angle in the XY plane. The Z\n\t * component of the vector will be zero.\n\t *\n\t * The resulting vector for theta=0 is equal to the positive X axis.\n\t *\n\t * @param theta\n\t *\t\t\t\tthe theta\n\t *\n\t * @return new vector in the XY plane\n\t */\n\tVec3D.fromXYTheta = function(theta) {\n\t\treturn new Vec3D(Math.cos(theta),Math.sin(theta),0);\n\t};\n\t/**\n\t * Creates a new vector from the given angle in the XZ plane. The Y\n\t * component of the vector will be zero.\n\t *\n\t * The resulting vector for theta=0 is equal to the positive X axis.\n\t *\n\t * @param theta\n\t *\t\t\t\tthe theta\n\t *\n\t * @return new vector in the XZ plane\n\t */\n\tVec3D.fromXZTheta = function(theta) {\n\t\t\treturn new Vec3D(Math.cos(theta), 0, Math.sin(theta));\n\t};\n\n\t/**\n\t * Creates a new vector from the given angle in the YZ plane. The X\n\t * component of the vector will be zero.\n\t *\n\t * The resulting vector for theta=0 is equal to the positive Y axis.\n\t *\n\t * @param theta\n\t *\t\t\t\tthe theta\n\t *\n\t * @return new vector in the YZ plane\n\t */\n\tVec3D.fromYZTheta = function(theta) {\n\t\treturn new Vec3D(0, Math.cos(theta), Math.sin(theta));\n\t};\n\n\t/**\n\t * Constructs a new vector consisting of the largest components of both\n\t * vectors.\n\t *\n\t * @param b\n\t *\t\t\t\tthe b\n\t * @param a\n\t *\t\t\t\tthe a\n\t *\n\t * @return result as new vector\n\t */\n\tVec3D.max = function(a, b) {\n\t\treturn new Vec3D(Math.max(a.x, b.x), Math.max(a.y,b.y), Math.max(a.z, b.z));\n\t};\n\n\t/**\n\t * Constructs a new vector consisting of the smallest components of both\n\t * vectors.\n\t *\n\t * @param b\n\t *\t\t\t\tcomparing vector\n\t * @param a\n\t *\t\t\t\tthe a\n\t *\n\t * @return result as new vector\n\t */\n\tVec3D.min = function(a,b) {\n\t\treturn new Vec3D(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.min(a.z, b.z));\n\t};\n\n\n\t/**\n\t * Static factory method. Creates a new random unit vector using the Random\n\t * implementation set as default for the {@link MathUtils} class.\n\t *\n\t * @return a new random normalized unit vector.\n\t */\n\n\tVec3D.randomVector = function() {\n\t\tvar v = new Vec3D(Math.random()*2 - 1, Math.random() * 2 -1, Math.random()* 2 - 1);\n\t\treturn v.normalize();\n\t};\n\tVec3D.ZERO = new Vec3D(0,0,0);\n\tVec3D.X_AXIS = new Vec3D(1,0,0);\n\tVec3D.Y_AXIS = new Vec3D(0,1,0);\n\tVec3D.Z_AXIS = new Vec3D(0,0,1);\n\tVec3D.Axis = {\n\t\tX: {\n\t\t\tgetVector: function(){\n\t\t\t\treturn Vec3D.X_AXIS;\n\t\t\t},\n\t\t\ttoString: function(){\n\t\t\t\treturn \"Vec3D.Axis.X\";\n\t\t\t}\n\t\t},\n\t\tY: {\n\t\t\tgetVector: function(){\n\t\t\t\treturn Vec3D.Y_AXIS;\n\t\t\t},\n\t\t\ttoString: function(){\n\t\t\t\treturn \"Vec3D.Axis.Y\";\n\t\t\t}\n\t\t},\n\t\tZ: {\n\t\t\tgetVector: function(){\n\t\t\t\treturn Vec3D.Z_AXIS;\n\t\t\t},\n\t\t\ttoString: function(){\n\t\t\t\treturn \"Vec3D.Axis.Z\";\n\t\t\t}\n\t\t}\n\t};\n\n\texports.Vec2D = Vec2D;\n\texports.Vec3D = Vec3D;\n\n"]},"metadata":{},"sourceType":"script"}